"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const component_1=require("./component"),utils_1=require("../utils/utils"),glob=require("glob"),utils_2=require("../utils/utils"),logging_1=require("../utils/logging"),path=require("path");class ComponentProvider{constructor(e){this.instance=e,this.components=[],this.included=[]}prepareIncluded(){this.instance.include.reduce((e,t)=>e.concat(glob.sync(utils_2.absolutePath(t),{})),[]).forEach(e=>{try{const t=this.getComponentByHref(this.instance,e);this.included.push(t)}catch(t){logging_1.warning("Invalid component at glob-resolved inclusion "+e)}})}getComponentByHref(e,t){const n=this.resolveHref(e,t),o=this.components.filter(e=>e.file===n),i=0===o.length?new component_1.Component(e,n):o[0];return 0===o.length&&this.components.push(i),i}resolveHref(e,t){return`${path.isAbsolute(t)?"":utils_1.dir(e.component.file)}${t}`}}exports.default=ComponentProvider;